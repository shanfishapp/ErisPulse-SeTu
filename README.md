# ErisPulse-SeTu 色图模块使用文档

## 模块概述
ErisPulse-SeTu 是一个基于 ErisPulse SDK 的色图搜索与分享模块，支持从多个 API 获取图片，并提供交互式搜索功能。

## 功能列表
1. 随机获取色图
2. 按标签/作者/PID搜索色图
3. 切换API源
4. 查看模块状态
5. 多图选择下载

## 命令列表

### 基础命令
| 命令 | 功能描述 |
|------|----------|
| `/随机色图` 或 `随机色图` | 随机获取一张色图 |
| `/色图` 或 `色图` | 随机获取一张色图 |
| `/搜索色图` 或 `搜索色图` | 进入交互式搜索模式 |
| `/切换api` 或 `切换api` | 切换API源 |
| `/色图状态面板` 或 `色图状态面板` | 查看当前模块状态 |

### 交互式搜索流程
1. 发送 `/搜索色图` 开始搜索
2. 根据提示选择搜索方式：
   - 按标签搜索
   - 按PID搜索
   - 按作者搜索
3. 根据提示输入搜索条件
4. 选择是否包含R18内容（需管理员开启R18权限）
5. 选择返回图片数量（1-20张）
6. 从搜索结果中选择要查看的图片

## 目前内置API支持情况

| API名称 | 标签搜索 | PID搜索 | 作者搜索 | 备注 |
|---------|---------|---------|---------|------|
| lolicon | ✓ | ✓ | ✓ | 默认API |
| mossia | ✗ | ✓ | ✓ |  |
| anosu | ✓ | ✗ | ✗ |  |

## 配置选项
可通过配置文件修改以下参数：
- `current_api`: 当前使用的API（默认"lolicon"）
- `max_retries`: 最大重试次数（默认10）
- `r18_pass`: 是否允许R18内容（默认false）

## 使用示例

### 随机获取色图
```
用户：/色图
机器人：收到了喵~正在为您准备图片喵~
（稍后发送图片）
```

### 按标签搜索
```
用户：/搜索色图
机器人：请选择搜索方式：
1. 按标签搜索
2. 按PID搜索
3. 按作者搜索
回复数字选择

用户：1
机器人：请输入要搜索的标签，多个标签用空格分隔：

用户：初音 泳装
机器人：是否包含R18内容？(是/否)

用户：否
机器人：要返回多少张图片？(1-20)

用户：3
机器人：正在搜索图片，请稍候...
（稍后列出搜索结果供选择）
```

### 切换API
```
用户：/切换api mossia
机器人：已切换至 mossia API
```

## **扩展性与未来计划**  

**ErisPulse-SeTu 模块设计为高度可扩展的核心模块**，当前已支持多 API 源切换和交互式搜索，未来计划通过**子模块拓展 API** 的方式进一步增强功能，包括：  

1. **插件化架构**：允许开发者通过标准接口添加新的图源 API，无需修改核心代码。  
2. **社区生态**：未来将开放插件开发规范，支持第三方贡献 API 模块。  

**当前原生支持的 API**（可随时通过 `/切换api` 命令切换）：  
- **lolicon**（默认）：支持标签、PID、作者搜索  
- **mossia**：支持 PID、作者搜索  
- **anosu**：支持标签搜索  

**未来版本将逐步解耦 API 实现**，使其成为可插拔的子模块，并提供更强大的扩展能力。
